# =============================================================================
# SHARED ENVIRONMENT CONFIGURATION FOR ALL RAG SERVICES
# =============================================================================
# Copy this file to .env and fill in your actual values
# This single .env file is shared by all services in the RAG pipeline

# =============================================================================
# API KEYS
# =============================================================================

# Google Gemini API Key (used by query-optimizer-service and ask-service)
GEMINI_API_KEY=your_gemini_api_key_here

# DeepInfra API Key (used by embed-service)
DEEPINFRA_API_KEY=your_deepinfra_api_key_here

# =============================================================================
# MILVUS VECTOR DATABASE
# =============================================================================

# Milvus authentication token
MILVUS_TOKEN=root:Milvus

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Query Optimizer Service (Port 5000)
GEMINI_OPTIMIZE_MODEL=gemini-2.5-flash-lite

# Embed Service (Port 4000)
EMBEDDING_MODEL=BAAI/bge-m3-multi
MAX_TEXTS_PER_REQUEST=10
MAX_TEXT_LENGTH=8000

# Search Service (Port 3000)
MAX_EMBEDDINGS_PER_REQUEST=10
MAX_SEARCH_K=100

# Ask Service (Port 2000)
GEMINI_ASK_MODEL=gemini-2.5-flash
SYSTEM_INSTRUCTION_PATH=system_instruction.txt

# Gateway Service (Port 8000)
QUERY_OPTIMIZER_URL=http://query-optimizer:5000
EMBED_SERVICE_URL=http://embed-service:4000
SEARCH_SERVICE_URL=http://search-service:3000
ASK_SERVICE_URL=http://ask-service:2000

# Scrape Service (Port 7000 dev / 3000 prod)
# - Scrapes and processes AlShamela books from HTML files
# - No additional configuration needed beyond LOG_LEVEL

# Split Service (Port 6500 dev / 3000 prod)
# - Performs semantic text chunking using statistical methods
# - Uses DEEPINFRA_API_KEY (configured above in API KEYS section)

# Match Service (Port 5500 dev / 3000 prod)
# - Matches book chunks to page ranges using fuzzy matching
# - No additional configuration needed beyond LOG_LEVEL

# =============================================================================
# COMMON SETTINGS
# =============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Request timeout in seconds
REQUEST_TIMEOUT=120

# CORS Configuration (comma-separated list of allowed origins, or * for all)
ALLOWED_ORIGINS=*

# =============================================================================
# OPTIONAL SETTINGS
# =============================================================================

# Maximum queries per request (query-optimizer-service)
MAX_QUERIES_PER_REQUEST=10

# Maximum query length in characters (query-optimizer-service)
MAX_QUERY_LENGTH=1000
